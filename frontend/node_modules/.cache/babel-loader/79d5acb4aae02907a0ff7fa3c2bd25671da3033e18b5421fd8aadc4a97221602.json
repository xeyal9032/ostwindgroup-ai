{"ast":null,"code":"import _objectSpread from\"C:/Users/xeyal/Desktop/Ai/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef,useCallback}from'react';import Message from'./Message';import{Send,Bot,AlertCircle}from'lucide-react';import{conversationService,chatService,ollamaService}from'../services/api';import{useNotifications}from'./NotificationBell';import analytics from'../services/analytics';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatWindow=_ref=>{let{conversationId,onNewConversation,onMessagesUpdate}=_ref;const[messages,setMessages]=useState([]);const[inputMessage,setInputMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[loadingMessages,setLoadingMessages]=useState(false);const[error,setError]=useState(null);const[useOllama,setUseOllama]=useState(false);const[ollamaStatus,setOllamaStatus]=useState(false);const[availableModels,setAvailableModels]=useState([]);const[selectedModel,setSelectedModel]=useState('xeyalcemilli9032/ostwindgroupai-modern');const messagesEndRef=useRef(null);const{showNotification}=useNotifications();useEffect(()=>{loadMessages();// Track chat start\nanalytics.trackChatStart();},[conversationId]);useEffect(()=>{scrollToBottom();},[messages]);// Ollama durumunu kontrol et\nuseEffect(()=>{const checkOllamaStatus=async()=>{try{const isRunning=await ollamaService.checkStatus();setOllamaStatus(isRunning);if(isRunning){const models=await ollamaService.listModels();setAvailableModels(models);if(models.length>0){setSelectedModel(models[0].name);}}}catch(error){console.error('Ollama durumu kontrol edilemedi:',error);setOllamaStatus(false);}};checkOllamaStatus();// Her 30 saniyede bir kontrol et\nconst interval=setInterval(checkOllamaStatus,30000);return()=>clearInterval(interval);},[]);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const loadMessages=useCallback(async()=>{if(!conversationId)return;setLoadingMessages(true);setError(null);try{const data=await conversationService.getMessages(conversationId);setMessages(data);onMessagesUpdate&&onMessagesUpdate(data);}catch(error){console.error('Mesajlar yüklenirken hata:',error);setError('Mesajlar yüklenemedi');}finally{setLoadingMessages(false);}},[conversationId,onMessagesUpdate]);const handleSendMessage=useCallback(async e=>{e.preventDefault();if(!inputMessage.trim()||isLoading)return;const userMessage={id:Date.now().toString(),conversation_id:conversationId||'new',role:'user',content:inputMessage.trim(),timestamp:new Date().toISOString()};setMessages(prev=>[...prev,userMessage]);setInputMessage('');setIsLoading(true);try{console.log('🎯 ChatWindow - Sending message:',{conversationId,message:inputMessage.trim(),useOllama});let response;if(useOllama&&ollamaStatus){// Ollama kullan\nconsole.log('🤖 Using Ollama with model:',selectedModel);// Track message sent\nanalytics.trackMessageSent(inputMessage.trim(),selectedModel);const startTime=Date.now();response=await ollamaService.sendMessage(inputMessage.trim(),selectedModel);// Track response received\nconst responseTime=Date.now()-startTime;analytics.trackMessageReceived(responseTime,selectedModel);const assistantMessage={id:(Date.now()+1).toString(),conversation_id:conversationId||'ollama-chat',role:'assistant',content:response.message,timestamp:response.timestamp,model:response.model};setMessages(prev=>[...prev,assistantMessage]);showNotification('Ollama Yanıtı',{message:\"\".concat(response.model,\" modeli ile yan\\u0131t verildi\"),type:'success',duration:3000});}else{// Normal Netlify Functions kullan\n// Track message sent\nanalytics.trackMessageSent(inputMessage.trim(),'groq');const startTime=Date.now();// Mesaj geçmişini hazırla (son 10 mesaj)\nconst messageHistory=messages.slice(-10).map(msg=>({role:msg.role,content:msg.content,timestamp:msg.timestamp}));response=await chatService.sendMessage(conversationId||'new',inputMessage.trim(),messageHistory);// Track response received\nconst responseTime=Date.now()-startTime;analytics.trackMessageReceived(responseTime,'groq');console.log('✅ ChatWindow - Response received:',response);const assistantMessage={id:(Date.now()+1).toString(),conversation_id:response.conversation_id,role:'assistant',content:response.message,timestamp:response.timestamp};setMessages(prev=>[...prev,assistantMessage]);showNotification('Yeni AI Yanıtı',{message:'AI asistanınız yanıt verdi',type:'success',duration:3000});if(!conversationId&&response.conversation_id){onNewConversation&&onNewConversation(response.conversation_id);}}setError(null);}catch(error){var _error$response;console.error('❌ ChatWindow - Error sending message:',error);console.error('❌ ChatWindow - Error details:',{message:error.message,stack:error.stack,response:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data});// Track error\nanalytics.trackError('message_send_error',error.message);// Hata durumunda da gerçek API'yi çağırmaya çalış\ntry{console.log('🔄 Retrying with direct API call...');const directResponse=await fetch('/.netlify/functions/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({conversation_id:conversationId||'new',message:inputMessage.trim()})});if(directResponse.ok){const directData=await directResponse.json();console.log('✅ Direct API call successful:',directData);const assistantMessage={id:(Date.now()+1).toString(),conversation_id:directData.conversation_id,role:'assistant',content:directData.message,timestamp:directData.timestamp};setMessages(prev=>[...prev,assistantMessage]);showNotification('AI Yanıtı',{message:'AI asistanınız yanıt verdi',type:'success',duration:3000});}else{throw new Error(\"HTTP \".concat(directResponse.status));}}catch(retryError){console.error('❌ Retry also failed:',retryError);// Son çare olarak demo mesajı\nconst demoMessage={id:(Date.now()+1).toString(),conversation_id:conversationId||'demo',role:'assistant',content:\"Merhaba! \\\"\".concat(inputMessage.trim(),\"\\\" mesaj\\u0131n\\u0131z\\u0131 ald\\u0131m. Bu bir demo yan\\u0131tt\\u0131r. OstWindGroup AI asistan\\u0131n\\u0131z size yard\\u0131mc\\u0131 olmaya haz\\u0131r!\"),timestamp:new Date().toISOString()};setMessages(prev=>[...prev,demoMessage]);showNotification('Demo Yanıt',{message:'Demo yanıt gönderildi',type:'info',duration:3000});}}finally{setIsLoading(false);}},[inputMessage,isLoading,conversationId,onNewConversation,showNotification]);const handleEditMessage=useCallback((messageId,newContent)=>{setMessages(prev=>prev.map(msg=>msg.id===messageId?_objectSpread(_objectSpread({},msg),{},{content:newContent}):msg));},[]);const formatTime=useCallback(timestamp=>{const date=new Date(timestamp);return date.toLocaleTimeString('tr-TR',{hour:'2-digit',minute:'2-digit'});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",children:[loadingMessages?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-primary\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted-foreground\",children:\"Mesajlar y\\xFCkleniyor...\"})]})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon bg-destructive/10\",children:/*#__PURE__*/_jsx(AlertCircle,{className:\"w-8 h-8 text-destructive\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"empty-title\",children:\"Ba\\u011Flant\\u0131 Hatas\\u0131\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-description\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setError(null);loadMessages();},className:\"modern-button-primary\",children:\"Tekrar Dene\"})]}):messages.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-12 h-12 text-primary\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"empty-title\",children:\"\\uD83D\\uDE80 OstWindGroup Modern AI'ya Ho\\u015F Geldiniz\"}),/*#__PURE__*/_jsx(\"p\",{className:\"empty-description\",children:\"D\\xFCnyan\\u0131n en geli\\u015Fmi\\u015F AI asistan\\u0131! 50+ uzmanl\\u0131k alan\\u0131nda size yard\\u0131mc\\u0131 olabilirim. A\\u015Fa\\u011F\\u0131ya mesaj\\u0131n\\u0131z\\u0131 yaz\\u0131n ve modern sohbetimizi ba\\u015Flatal\\u0131m.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 justify-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-blue-500/10 to-purple-500/10 text-blue-600 dark:text-blue-400 rounded-full text-sm\",children:\"\\uD83E\\uDD16 AI & Makine \\xD6\\u011Frenmesi\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-green-500/10 to-teal-500/10 text-green-600 dark:text-green-400 rounded-full text-sm\",children:\"\\uD83D\\uDCBB Programlama\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-purple-500/10 to-pink-500/10 text-purple-600 dark:text-purple-400 rounded-full text-sm\",children:\"\\uD83C\\uDF10 Web Geli\\u015Ftirme\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-orange-500/10 to-red-500/10 text-orange-600 dark:text-orange-400 rounded-full text-sm\",children:\"\\uD83C\\uDFA8 UI/UX Tasar\\u0131m\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-indigo-500/10 to-blue-500/10 text-indigo-600 dark:text-indigo-400 rounded-full text-sm\",children:\"\\uD83D\\uDCCA Veri Analizi\"}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 bg-gradient-to-r from-pink-500/10 to-rose-500/10 text-pink-600 dark:text-pink-400 rounded-full text-sm\",children:\"\\uD83D\\uDE80 Blockchain & Web3\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:messages.map(message=>/*#__PURE__*/_jsx(\"div\",{className:\"fade-in\",children:/*#__PURE__*/_jsx(Message,{message:message,time:formatTime(message.timestamp),onEdit:handleEditMessage})},message.id))}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-primary\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-muted-foreground\",children:\"Yaz\\u0131yor\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"loading-dots\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-dot\"})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ai-control-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-lg border border-blue-200 dark:border-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(ollamaStatus?'bg-green-500':'bg-red-500')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Ollama Modern\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"(\",ollamaStatus?'Çalışıyor':'Kapalı',\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Groq API\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"(Aktif)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full bg-purple-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Modern AI\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"(50+ Uzmanl\\u0131k)\"})]}),availableModels.length>0&&/*#__PURE__*/_jsx(\"select\",{value:selectedModel,onChange:e=>{const oldModel=selectedModel;const newModel=e.target.value;setSelectedModel(newModel);analytics.trackModelSwitch(oldModel,newModel);},className:\"text-xs px-2 py-1 border rounded bg-white dark:bg-gray-700\",children:availableModels.map(model=>/*#__PURE__*/_jsxs(\"option\",{value:model.name,children:[model.name.includes('ostwindgroupai-modern')?'🚀 Modern AI':model.name,\" (\",(model.size/1024/1024/1024).toFixed(1),\"GB)\"]},model.name))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-1 text-xs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:useOllama,onChange:e=>setUseOllama(e.target.checked),className:\"rounded\",disabled:!ollamaStatus}),/*#__PURE__*/_jsx(\"span\",{children:\"Modern AI Kullan\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-input-area\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSendMessage,className:\"relative\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 relative\",children:/*#__PURE__*/_jsx(\"textarea\",{value:inputMessage,onChange:e=>setInputMessage(e.target.value),placeholder:\"Mesaj\\u0131n\\u0131z\\u0131 yaz\\u0131n...\",disabled:isLoading,className:\"modern-input\",rows:1,onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage(e);}},onInput:e=>{e.target.style.height='auto';e.target.style.height=Math.min(e.target.scrollHeight,128)+'px';}})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputMessage.trim()||isLoading,className:\"modern-button-primary hover-lift disabled:opacity-50 disabled:cursor-not-allowed\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"}):/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"})})]})})})]});};export default ChatWindow;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Message","Send","Bot","AlertCircle","conversationService","chatService","ollamaService","useNotifications","analytics","jsx","_jsx","jsxs","_jsxs","ChatWindow","_ref","conversationId","onNewConversation","onMessagesUpdate","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","loadingMessages","setLoadingMessages","error","setError","useOllama","setUseOllama","ollamaStatus","setOllamaStatus","availableModels","setAvailableModels","selectedModel","setSelectedModel","messagesEndRef","showNotification","loadMessages","trackChatStart","scrollToBottom","checkOllamaStatus","isRunning","checkStatus","models","listModels","length","name","console","interval","setInterval","clearInterval","_messagesEndRef$curre","current","scrollIntoView","behavior","data","getMessages","handleSendMessage","e","preventDefault","trim","userMessage","id","Date","now","toString","conversation_id","role","content","timestamp","toISOString","prev","log","message","response","trackMessageSent","startTime","sendMessage","responseTime","trackMessageReceived","assistantMessage","model","concat","type","duration","messageHistory","slice","map","msg","_error$response","stack","trackError","directResponse","fetch","method","headers","body","JSON","stringify","ok","directData","json","Error","status","retryError","demoMessage","handleEditMessage","messageId","newContent","_objectSpread","formatTime","date","toLocaleTimeString","hour","minute","className","children","onClick","time","onEdit","ref","value","onChange","oldModel","newModel","target","trackModelSwitch","includes","size","toFixed","checked","disabled","onSubmit","placeholder","rows","onKeyDown","key","shiftKey","onInput","style","height","Math","min","scrollHeight"],"sources":["C:/Users/xeyal/Desktop/Ai/app/frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport Message from './Message';\nimport { Send, Bot, AlertCircle } from 'lucide-react';\nimport { conversationService, chatService, ollamaService } from '../services/api';\nimport { useNotifications } from './NotificationBell';\nimport analytics from '../services/analytics';\n\nconst ChatWindow = ({ conversationId, onNewConversation, onMessagesUpdate }) => {\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [error, setError] = useState(null);\n  const [useOllama, setUseOllama] = useState(false);\n  const [ollamaStatus, setOllamaStatus] = useState(false);\n  const [availableModels, setAvailableModels] = useState([]);\n  const [selectedModel, setSelectedModel] = useState('xeyalcemilli9032/ostwindgroupai-modern');\n  const messagesEndRef = useRef(null);\n  const { showNotification } = useNotifications();\n\n  useEffect(() => {\n    loadMessages();\n    // Track chat start\n    analytics.trackChatStart();\n  }, [conversationId]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Ollama durumunu kontrol et\n  useEffect(() => {\n    const checkOllamaStatus = async () => {\n      try {\n        const isRunning = await ollamaService.checkStatus();\n        setOllamaStatus(isRunning);\n        \n        if (isRunning) {\n          const models = await ollamaService.listModels();\n          setAvailableModels(models);\n          if (models.length > 0) {\n            setSelectedModel(models[0].name);\n          }\n        }\n      } catch (error) {\n        console.error('Ollama durumu kontrol edilemedi:', error);\n        setOllamaStatus(false);\n      }\n    };\n\n    checkOllamaStatus();\n    // Her 30 saniyede bir kontrol et\n    const interval = setInterval(checkOllamaStatus, 30000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const loadMessages = useCallback(async () => {\n    if (!conversationId) return;\n    setLoadingMessages(true);\n    setError(null);\n    try {\n      const data = await conversationService.getMessages(conversationId);\n      setMessages(data);\n      onMessagesUpdate && onMessagesUpdate(data);\n    } catch (error) {\n      console.error('Mesajlar yüklenirken hata:', error);\n      setError('Mesajlar yüklenemedi');\n    } finally {\n      setLoadingMessages(false);\n    }\n  }, [conversationId, onMessagesUpdate]);\n\n  const handleSendMessage = useCallback(async (e) => {\n    e.preventDefault();\n    if (!inputMessage.trim() || isLoading) return;\n    \n    const userMessage = {\n      id: Date.now().toString(),\n      conversation_id: conversationId || 'new',\n      role: 'user',\n      content: inputMessage.trim(),\n      timestamp: new Date().toISOString()\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setIsLoading(true);\n    \n    try {\n      console.log('🎯 ChatWindow - Sending message:', { conversationId, message: inputMessage.trim(), useOllama });\n      \n      let response;\n      \n      if (useOllama && ollamaStatus) {\n        // Ollama kullan\n        console.log('🤖 Using Ollama with model:', selectedModel);\n        \n        // Track message sent\n        analytics.trackMessageSent(inputMessage.trim(), selectedModel);\n        const startTime = Date.now();\n        \n        response = await ollamaService.sendMessage(inputMessage.trim(), selectedModel);\n        \n        // Track response received\n        const responseTime = Date.now() - startTime;\n        analytics.trackMessageReceived(responseTime, selectedModel);\n        \n        const assistantMessage = {\n          id: (Date.now() + 1).toString(),\n          conversation_id: conversationId || 'ollama-chat',\n          role: 'assistant',\n          content: response.message,\n          timestamp: response.timestamp,\n          model: response.model\n        };\n        \n        setMessages(prev => [...prev, assistantMessage]);\n        showNotification('Ollama Yanıtı', {\n          message: `${response.model} modeli ile yanıt verildi`,\n          type: 'success',\n          duration: 3000\n        });\n      } else {\n        // Normal Netlify Functions kullan\n        // Track message sent\n        analytics.trackMessageSent(inputMessage.trim(), 'groq');\n        const startTime = Date.now();\n        \n        // Mesaj geçmişini hazırla (son 10 mesaj)\n        const messageHistory = messages.slice(-10).map(msg => ({\n          role: msg.role,\n          content: msg.content,\n          timestamp: msg.timestamp\n        }));\n        \n        response = await chatService.sendMessage(conversationId || 'new', inputMessage.trim(), messageHistory);\n        \n        // Track response received\n        const responseTime = Date.now() - startTime;\n        analytics.trackMessageReceived(responseTime, 'groq');\n        \n        console.log('✅ ChatWindow - Response received:', response);\n        \n        const assistantMessage = {\n          id: (Date.now() + 1).toString(),\n          conversation_id: response.conversation_id,\n          role: 'assistant',\n          content: response.message,\n          timestamp: response.timestamp\n        };\n        \n        setMessages(prev => [...prev, assistantMessage]);\n        showNotification('Yeni AI Yanıtı', {\n          message: 'AI asistanınız yanıt verdi',\n          type: 'success',\n          duration: 3000\n        });\n        \n        if (!conversationId && response.conversation_id) {\n          onNewConversation && onNewConversation(response.conversation_id);\n        }\n      }\n      \n      setError(null);\n    } catch (error) {\n      console.error('❌ ChatWindow - Error sending message:', error);\n      console.error('❌ ChatWindow - Error details:', {\n        message: error.message,\n        stack: error.stack,\n        response: error.response?.data\n      });\n\n      // Track error\n      analytics.trackError('message_send_error', error.message);\n\n      // Hata durumunda da gerçek API'yi çağırmaya çalış\n      try {\n        console.log('🔄 Retrying with direct API call...');\n        const directResponse = await fetch('/.netlify/functions/chat', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            conversation_id: conversationId || 'new',\n            message: inputMessage.trim()\n          }),\n        });\n\n        if (directResponse.ok) {\n          const directData = await directResponse.json();\n          console.log('✅ Direct API call successful:', directData);\n          \n          const assistantMessage = {\n            id: (Date.now() + 1).toString(),\n            conversation_id: directData.conversation_id,\n            role: 'assistant',\n            content: directData.message,\n            timestamp: directData.timestamp\n          };\n\n          setMessages(prev => [...prev, assistantMessage]);\n          showNotification('AI Yanıtı', {\n            message: 'AI asistanınız yanıt verdi',\n            type: 'success',\n            duration: 3000\n          });\n        } else {\n          throw new Error(`HTTP ${directResponse.status}`);\n        }\n      } catch (retryError) {\n        console.error('❌ Retry also failed:', retryError);\n        \n        // Son çare olarak demo mesajı\n        const demoMessage = {\n          id: (Date.now() + 1).toString(),\n          conversation_id: conversationId || 'demo',\n          role: 'assistant',\n          content: `Merhaba! \"${inputMessage.trim()}\" mesajınızı aldım. Bu bir demo yanıttır. OstWindGroup AI asistanınız size yardımcı olmaya hazır!`,\n          timestamp: new Date().toISOString()\n        };\n\n        setMessages(prev => [...prev, demoMessage]);\n\n        showNotification('Demo Yanıt', {\n          message: 'Demo yanıt gönderildi',\n          type: 'info',\n          duration: 3000\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [inputMessage, isLoading, conversationId, onNewConversation, showNotification]);\n\n  const handleEditMessage = useCallback((messageId, newContent) => {\n    setMessages(prev => prev.map(msg => \n      msg.id === messageId ? { ...msg, content: newContent } : msg\n    ));\n  }, []);\n\n  const formatTime = useCallback((timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString('tr-TR', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  }, []);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Messages Area */}\n      <div className=\"chat-messages\">\n        {loadingMessages ? (\n          <div className=\"flex items-center justify-center h-full\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\n                <Bot className=\"w-4 h-4 text-primary\" />\n              </div>\n              <span className=\"text-muted-foreground\">Mesajlar yükleniyor...</span>\n            </div>\n          </div>\n        ) : error ? (\n          <div className=\"empty-state\">\n            <div className=\"empty-icon bg-destructive/10\">\n              <AlertCircle className=\"w-8 h-8 text-destructive\" />\n            </div>\n            <h3 className=\"empty-title\">Bağlantı Hatası</h3>\n            <p className=\"empty-description\">{error}</p>\n            <button \n              onClick={() => { setError(null); loadMessages(); }} \n              className=\"modern-button-primary\"\n            >\n              Tekrar Dene\n            </button>\n          </div>\n        ) : messages.length === 0 ? (\n          <div className=\"empty-state\">\n            <div className=\"empty-icon\">\n              <Bot className=\"w-12 h-12 text-primary\" />\n            </div>\n            <h2 className=\"empty-title\">\n              🚀 OstWindGroup Modern AI'ya Hoş Geldiniz\n            </h2>\n            <p className=\"empty-description\">\n              Dünyanın en gelişmiş AI asistanı! 50+ uzmanlık alanında size yardımcı olabilirim. Aşağıya mesajınızı yazın ve modern sohbetimizi başlatalım.\n            </p>\n            <div className=\"flex flex-wrap gap-2 justify-center\">\n              <span className=\"px-3 py-1 bg-gradient-to-r from-blue-500/10 to-purple-500/10 text-blue-600 dark:text-blue-400 rounded-full text-sm\">🤖 AI & Makine Öğrenmesi</span>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-green-500/10 to-teal-500/10 text-green-600 dark:text-green-400 rounded-full text-sm\">💻 Programlama</span>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-purple-500/10 to-pink-500/10 text-purple-600 dark:text-purple-400 rounded-full text-sm\">🌐 Web Geliştirme</span>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-orange-500/10 to-red-500/10 text-orange-600 dark:text-orange-400 rounded-full text-sm\">🎨 UI/UX Tasarım</span>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-indigo-500/10 to-blue-500/10 text-indigo-600 dark:text-indigo-400 rounded-full text-sm\">📊 Veri Analizi</span>\n              <span className=\"px-3 py-1 bg-gradient-to-r from-pink-500/10 to-rose-500/10 text-pink-600 dark:text-pink-400 rounded-full text-sm\">🚀 Blockchain & Web3</span>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {messages.map((message) => (\n              <div key={message.id} className=\"fade-in\">\n                <Message\n                  message={message}\n                  time={formatTime(message.timestamp)}\n                  onEdit={handleEditMessage}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n        \n        {isLoading && (\n          <div className=\"flex items-center space-x-3 p-4\">\n            <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\n              <Bot className=\"w-4 h-4 text-primary\" />\n            </div>\n            <span className=\"text-sm text-muted-foreground\">Yazıyor</span>\n            <div className=\"loading-dots\">\n              <div className=\"loading-dot\"></div>\n              <div className=\"loading-dot\"></div>\n              <div className=\"loading-dot\"></div>\n            </div>\n          </div>\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* AI Control Panel */}\n      <div className=\"ai-control-panel\">\n        <div className=\"flex items-center justify-between p-3 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-lg border border-blue-200 dark:border-gray-600\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"flex items-center space-x-2\">\n              <div className={`w-2 h-2 rounded-full ${ollamaStatus ? 'bg-green-500' : 'bg-red-500'}`}></div>\n              <span className=\"text-sm font-medium\">Ollama Modern</span>\n              <span className=\"text-xs text-gray-500\">({ollamaStatus ? 'Çalışıyor' : 'Kapalı'})</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n              <span className=\"text-sm font-medium\">Groq API</span>\n              <span className=\"text-xs text-gray-500\">(Aktif)</span>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-2 h-2 rounded-full bg-purple-500\"></div>\n              <span className=\"text-sm font-medium\">Modern AI</span>\n              <span className=\"text-xs text-gray-500\">(50+ Uzmanlık)</span>\n            </div>\n            \n            {availableModels.length > 0 && (\n              <select\n                value={selectedModel}\n                onChange={(e) => {\n                  const oldModel = selectedModel;\n                  const newModel = e.target.value;\n                  setSelectedModel(newModel);\n                  analytics.trackModelSwitch(oldModel, newModel);\n                }}\n                className=\"text-xs px-2 py-1 border rounded bg-white dark:bg-gray-700\"\n              >\n                {availableModels.map((model) => (\n                  <option key={model.name} value={model.name}>\n                    {model.name.includes('ostwindgroupai-modern') ? '🚀 Modern AI' : model.name} ({(model.size / 1024 / 1024 / 1024).toFixed(1)}GB)\n                  </option>\n                ))}\n              </select>\n            )}\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <label className=\"flex items-center space-x-1 text-xs\">\n              <input\n                type=\"checkbox\"\n                checked={useOllama}\n                onChange={(e) => setUseOllama(e.target.checked)}\n                className=\"rounded\"\n                disabled={!ollamaStatus}\n              />\n              <span>Modern AI Kullan</span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Input Area */}\n      <div className=\"chat-input-area\">\n        <form onSubmit={handleSendMessage} className=\"relative\">\n          <div className=\"flex items-end space-x-3\">\n            <div className=\"flex-1 relative\">\n              <textarea\n                value={inputMessage}\n                onChange={(e) => setInputMessage(e.target.value)}\n                placeholder=\"Mesajınızı yazın...\"\n                disabled={isLoading}\n                className=\"modern-input\"\n                rows={1}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    handleSendMessage(e);\n                  }\n                }}\n                onInput={(e) => {\n                  e.target.style.height = 'auto';\n                  e.target.style.height = Math.min(e.target.scrollHeight, 128) + 'px';\n                }}\n              />\n            </div>\n            \n            <button\n              type=\"submit\"\n              disabled={!inputMessage.trim() || isLoading}\n              className=\"modern-button-primary hover-lift disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n              ) : (\n                <Send className=\"w-4 h-4\" />\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}